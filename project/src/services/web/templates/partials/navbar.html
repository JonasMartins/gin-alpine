{{ define "navbar" }}
<!-- Overlay for mobile -->
<div
  x-show="sidebarOpen"
  x-cloak
  @click="sidebarOpen = false"
  class="fixed inset-0 bg-black/40 z-30 lg:hidden"
  x-transition.opacity
></div>

<!-- Navbar -->
<header
  class="sticky top-0 z-40 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"
>
  <div class="flex h-14 items-center px-4 gap-4">
    <!-- Sidebar toggle -->
    <button
      @click="sidebarOpen = !sidebarOpen"
      class="inline-flex items-center justify-center rounded-md text-muted-foreground hover:text-foreground hover:bg-accent h-9 w-9 transition-colors"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M4 6h16M4 12h16M4 18h16"
        />
      </svg>
    </button>

    <!-- logo  -->
    <div class="flex items-center gap-2 mt-2">
      <a href="/" class="block">
        <span class="sr-only">homepage</span>
        <img
          src="/static/images/logo.png"
          alt="Mega Analyzer Logo"
          class="h-32 w-auto"
        />
      </a>
    </div>

    <!-- Logo -->
    <!-- <a href="#" class="flex items-center gap-2 font-semibold text-lg">
      <span
        class="inline-flex items-center justify-center h-8 w-8 rounded-lg bg-primary text-primary-foreground text-sm font-bold"
        >A</span
      >
      <span class="hidden sm:inline">Acme Inc</span>
    </a> -->

    <!-- Nav links -->
    <nav class="hidden md:flex items-center gap-1 ml-4 text-sm">
      <a
        href="#"
        class="px-3 py-2 rounded-md font-medium text-foreground bg-accent"
        >Dashboard</a
      >
      <a
        href="#"
        class="px-3 py-2 rounded-md font-medium text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"
        >Products</a
      >
      <a
        href="#"
        class="px-3 py-2 rounded-md font-medium text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"
        >Orders</a
      >
      <a
        href="#"
        class="px-3 py-2 rounded-md font-medium text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"
        >Analytics</a
      >
    </nav>

    <div class="ml-auto flex items-center gap-2">
      <!-- Avatar with Dropdown -->
      <div x-data="{ userMenu: false }" class="relative">
        <button
          @click="userMenu = !userMenu"
          class="h-8 w-8 rounded-full bg-primary text-primary-foreground text-xs font-semibold flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-primary/50"
        >
          JM
        </button>
        <div
          x-show="userMenu"
          x-cloak
          @click.away="userMenu = false"
          x-transition:enter="transition ease-out duration-100"
          x-transition:enter-start="opacity-0 scale-95"
          x-transition:enter-end="opacity-100 scale-100"
          x-transition:leave="transition ease-in duration-75"
          x-transition:leave-start="opacity-100 scale-100"
          x-transition:leave-end="opacity-0 scale-95"
          class="absolute right-0 mt-2 w-56 rounded-lg border border-border bg-background shadow-lg z-50"
        >
          <div class="px-4 py-3 border-b border-border">
            <p class="text-sm font-medium">{{ .User.Name }}</p>
            <p class="text-xs text-muted-foreground">{{ .User.Email }}</p>
          </div>
          <ul class="py-1">
            <li>
              <a
                href="#"
                class="flex items-center gap-2 px-4 py-2 text-sm text-foreground hover:bg-accent transition-colors"
              >
                <svg
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                  />
                </svg>
                Profile</a
              >
            </li>
            <li>
              <a
                href="#"
                class="flex items-center gap-2 px-4 py-2 text-sm text-foreground hover:bg-accent transition-colors"
              >
                <svg
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  />
                  <circle cx="12" cy="12" r="3" />
                </svg>
                Settings</a
              >
            </li>
            <li>
              <a
                href="#"
                class="flex items-center gap-2 px-4 py-2 text-sm text-foreground hover:bg-accent transition-colors"
              >
                <svg
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
                  />
                </svg>
                Billing</a
              >
            </li>
          </ul>
          <div class="border-t border-border py-1">
            <form method="POST" action="/logout">
              <input type="hidden" name="_csrf" value="{{ .csrf }}" />

              <button
                type="submit"
                class="w-full flex items-center gap-2 px-4 py-2 text-sm text-destructive hover:bg-accent transition-colors"
              >
                <svg
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                  />
                </svg>
                Logout
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
{{ end }}
